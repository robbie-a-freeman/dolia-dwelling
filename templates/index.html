{% extends 'base.html' %}

{% block title %}Dolia Dwelling{% endblock %}

{% block head %}
<style>
  /* Remove the navbar's default margin-bottom and rounded borders */
  .navbar {
    margin-bottom: 0;
    border-radius: 0;
  }

  /* Add a gray background color and some padding to the footer */
  footer {
    background-color: #f2f2f2;
    padding: 25px;
  }

  #search {
    margin-top:50px;
  }

  .container {
    margin-top:50px;
  }

  html, body, #map {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  body {
    background-color: #FFF;
    overflow: hidden;
    font-family: "Trebuchet MS";
  }
</style>

<script src="https://js.arcgis.com/3.28/"></script>
<script>
  var map, csv;

  require([
    "esri/map",
    "esri/layers/CSVLayer",
    "esri/Color",
    "esri/symbols/SimpleMarkerSymbol",
    "esri/renderers/SimpleRenderer",
    "esri/InfoTemplate",
    "esri/config",
    "esri/dijit/Search",
    "dojo/domReady!"
  ], function(
    Map, CSVLayer, Color, SimpleMarkerSymbol, SimpleRenderer, InfoTemplate, esriConfig, Search
  ) {

    // Use CORS
    esriConfig.defaults.io.corsEnabledServers.push("earthquake.usgs.gov"); // supports CORS

    // Use proxy if the server doesn't support CORS
    // esriConfig.defaults.io.proxyUrl = "/proxy/";

    map = new Map("map", {
      basemap: "satellite",
      center: [14.487,40.7505],
      zoom: 16
    });
    var search = new Search({
            map: map
         }, "search");
    csv = new CSVLayer("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.csv", {
      copyright: "USGS.gov"
    });
    var orangeRed = new Color([238, 69, 0, 0.5]); // hex is #ff4500
    var marker = new SimpleMarkerSymbol("solid", 15, null, orangeRed);
    var renderer = new SimpleRenderer(marker);
    csv.setRenderer(renderer);
    var template = new InfoTemplate("${type}", "${place}");
    csv.setInfoTemplate(template);

    map.addLayer(csv);
    search.startup();
  });
</script>
{% endblock %}

{% block content %}
<div id="search"></div>
<div id="map"></div>
{% endblock %}
